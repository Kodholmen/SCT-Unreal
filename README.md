# SCT-Unreal
Spatial Camera Tracker Unreal Plugin - Use this plugin to parse the spatial data generated by the iPhone/iPad app to create CG Content.

Are you a movie maker enthusiast? Do you want to add CG content to your movies and want an easy way to synchronise real and virtual cameras? Or are you looking at creating Mixed Reality footage? Then Spatial Camera Tracker is for you!

Spatial Camera Tracker is a virtual production tool allowing you to capture HD video together with positional tracking information of both the camera and the person being filmed! No external sensors needed which means you can record anywhere and over huge distances using only your iPhone or iPad!

Import the tracking information into Unreal Engine and drive virtual cameras, replaying the original camera movements, and capture CG footage and combine with your real life footage using standard video editing software or in-engine techniques. As the information is recorded you can iterate on your virtual scenes until you are happy with the result.

The full User Guide for the App can be found here: http://kodholmen.com/sct

# Plugin User Guide
The plugin comes with simple usage examples. You find the scenes under "SCT Content/Maps". The collection will grow over time.

## What's supported?
Although the plugin contains Live Link code it's not supported yet. It's work in progress.
The current release supports replay of Camera and Skeleton sessions. See the bundled Blueprints under "SCT Content/Blueprints" for usage.

## Import a spatial camera recording
The first thing you want to do is to transfer the session you want to use from the iPhone/iPad onto the computer you are running Unreal on by going into the share view in SCT and use any of the standard sharing mechanism.
You can also use the "Files" application on your device to find/view/share the files.

Place the files anywhere you want. It doesn't have to be under the project folder structure as you will import the data to a ScriptableObject asset by following the steps below:
* Launch the SCT Editor Tools Widget by navigating to "SCT Content/Editor" in the Content Browser and right click on the SCTEditorTools Widget and select "Run Editor Utility Widget"

![Alt text](Documentation/SCTEditorUtilityWidget_launch.png?raw=true "Editor Widget")
![Alt text](Documentation/SCTEditorUtilityWidget_ui.png?raw=true "Editor Widget")

* Place or dock the panel where you want
* Press the "Import Spatial Camera" button and browse to the capture file you want to import
* Select a destination _within_ the project structure to place the imported asset

## Replay a captured session
To use your captured sessions follow the steps below:
* Place an empty Actor in your map. This will serve as the camera anchor allowing you to move the spatial camera around the scene to position it depending on what you want to record. The replay will be relative the anchor's location.
* Place an instance of the "BP_SCTReplayCameraPawn" Blueprint located under SCT Content/Blueprints in the scene.
* Attach the Blueprint to the empty Actor you placed in the first step. Make the local position 0/0/0 to make it more clear where the camera replay will originate from.
* Select the BP_SCTReplayCameraPawn and view the properties.

![Alt text](Documentation/SpatialCameraPlayer_Properties.png?raw=true "Properties")

* Reference the data asset you previously imported by pressing the dropdown next to the "Camera Data Asset" property.
* If you want the replay to auto play when previewing the Map, check the "Auto Play" check box. If you want to time your start leave it unchecked and control the start manually from Blueprint. Check the BP_SCTReplayCameraPawn for how Auto Start does it.
Press play and the camera should replay the recorded session!

## Viewing Session Meta Data
Once you've imported a session it's easy to view details about the session to see properties such as the camera's FOV. Simply navigate to the asset in the Content Browser and double click the asset.

![Alt text](Documentation/SCT_ReplayCamera_Asset.png?raw=true "Session Asset")

Use the details to view the session meta data such as camera intrinsics and other information making it easier to match your virtual camera lens with the device used to capture the session.

## Import User Anchors
Once you have imported a session you can easily import any available User Anchors to the scene:
* Open the scene you want to import the anchors to
* Navigate to the data asset in the Content Browser
* Right click the asset and select the "Scripted Actions / Spawn Use Anchors" option
* The World Outliner should show the newly created anchors as Empty Actors that you can attach other Actors to

## Import Environment Probes
SCT is able to record environment probes of the world while recording. To import these to Unreal use the same Editor Widget you used when importing a session but press the "Import Environment Probes" button instead. Browse to the dat-file for environment probes named "environment.dat". The World Outliner should now show the imported Box Reflection Captures.
Import the Cubemap textures named "environment_0.png", etc and use with the newly created Box Captures. 
**Please note** that Unreal doesn't support importing the cubemap textures directly. You need to use an external tool such as Photoshop and NVidia Texture tool. The cubemaps created by SCT adheres to the NVidia layout.

![Alt text](Documentation/CubeMapNvidiaLayout.jpg?raw=true "Cubemap Layout")